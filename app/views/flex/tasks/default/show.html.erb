<%# Show view for displaying a task
    Required locals:
    - applicant_full_name: String - The name of the person related to this task
    - assigned_user_full_name: String - The name of the user assigned to this task
    - task: Flex::Task - The task object

    Optional locals:
    - task_details_partial: String - The HTML to render for the task details. If not provided, the view will look for a partial named after the task type within the `details` directory.
    
    Example usage:
      <%= render template: 'flex/tasks/default/show', locals: {
        task: @task,
        applicant_full_name: application_form.full_name || "TBD",
        assigned_user_full_name: assigned_user&.full_name || "Not Assigned",
        :task_details_partial => render(partial: "flex/tasks/details/#{@task.class.name.underscore}", locals: { task: @task, application_form: application_form })
      } %>
%>
<% task_type_with_name = t("tasks.types.#{task.type.underscore}") + " - " + applicant_full_name %>
<main class="usa-section">
  <div class="grid-container">
    <nav class="usa-breadcrumb" aria-label="Breadcrumbs">
      <ol class="usa-breadcrumb__list">
        <li class="usa-breadcrumb__list-item">
          <%= link_to t("flex.tasks.breadcrumbs.home"), "/", class: "usa-breadcrumb__link" %>
        </li>
        <li class="usa-breadcrumb__list-item">
          <%= link_to t("flex.tasks.breadcrumbs.tasks"), tasks_path, class: "usa-breadcrumb__link" %>
        </li>
        <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
          <span><%= task_type_with_name %></span>
        </li>
      </ol>
    </nav>
    <h1 class="section-heading-h1"><%= task_type_with_name %></h1>
    <div class="border-bottom-1px margin-bottom-1 padding-bottom-1">
      <div class="grid-container">
        <div class="grid-row grid-gap-2">
          <div class="grid-col-auto">
            <strong><%= t("flex.tasks.show.details.status") %>:</strong> <%= t("tasks.statuses.#{task.status}") %>
          </div>
          <div class="grid-col-auto">
            <strong><%= t("flex.tasks.show.details.due_on") %>:</strong> <%= local_en_us task.due_on %>
          </div>
          <div class="grid-col-auto">
            <strong><%= t("flex.tasks.show.details.assigned_to") %>:</strong> <%= assigned_user_full_name %>
          </div>
        </div>
      </div>
    </div>
    <section class="usa-section padding-top-2">
      <% if flash["task-message"] %>
        <div class="usa-alert usa-alert--info usa-alert--no-icon">
          <div class="usa-alert__body">
            <p class="usa-alert__text">
              <%= flash["task-message"] %>
            </p>
          </div>
        </div>
      <% end %>
      <h2 class="section-heading-h2"><%= t("flex.tasks.show.headers.task_details") %></h2>
      <% if local_assigns.has_key?(:task_details_partial) %>
        <%= render html: local_assigns[:task_details_partial] %>
      <% else %>
        <%= render partial: "flex/tasks/details/#{task.type.underscore}", locals: local_assigns.to_h %>
      <% end %>
    </section>
  </main>
